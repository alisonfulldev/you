<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%= typeof title !== 'undefined' ? title : 'YOU certificados' %></title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/public/styles.css" />
</head>
<body>
  <header class="yt-header">
    <div class="container nav-bar">
      <a class="yt-logo" href="/">
        <img src="/public/logo.png" alt="Logo" class="logo-img" onerror="this.style.display='none'" />
        <span class="logo-text">YOU certificados</span>
      </a>
      <form class="yt-search" method="POST" action="/start">
        <input class="input pill large" type="text" name="url" value="" placeholder="Cole aqui o link da playlist (YouTube)" />
        <button class="btn primary" type="submit">Iniciar</button>
      </form>
      <div class="yt-actions">
        <button id="sidebarToggle" class="btn ghost mobile-only" type="button" aria-label="Abrir menu">Menu</button>
        <button id="themeToggle" class="btn ghost" type="button" aria-label="Alternar tema">Tema</button>
      </div>
    </div>
  </header>
  <div class="yt-shell">
    <div class="yt-backdrop" aria-hidden="true"></div>
    <aside class="yt-sidebar">
      <nav class="yt-menu">
        <a class="yt-menu-item" href="/">Início</a>
        <a class="yt-menu-item" href="/certificate/validate">Validar certificado</a>
      </nav>
    </aside>
    <main class="yt-main">
      <div class="container">
        <%- body %>
      </div>
    </main>
  </div>
  <footer class="footer container">
    <span>© <%= new Date().getFullYear() %> YOU certificados</span>
  </footer>
  <script src="/public/react/utube-app.iife.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      // Mount Home feed
      const rootEl = document.querySelector('#react-root');
      if(rootEl && window.UtubeApp && typeof window.UtubeApp.mount==='function'){ window.UtubeApp.mount('#react-root'); }
      // Theme toggle with persistence
      const root = document.documentElement;
      const saved = localStorage.getItem('theme');
      if (saved) root.setAttribute('data-theme', saved);
      document.getElementById('themeToggle')?.addEventListener('click', function(){
        const cur = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', cur);
        localStorage.setItem('theme', cur);
      });
      // Mark active menu item
      const path = location.pathname;
      document.querySelectorAll('.yt-menu a').forEach(a => { if (a.getAttribute('href') === path) a.classList.add('active'); });

      // Sidebar toggle (mobile)
      const body = document.body;
      const toggle = document.getElementById('sidebarToggle');
      const backdrop = document.querySelector('.yt-backdrop');
      toggle?.addEventListener('click', () => { body.classList.toggle('sidebar-open'); });
      backdrop?.addEventListener('click', () => { body.classList.remove('sidebar-open'); });
      document.querySelectorAll('.yt-menu-item').forEach(el => el.addEventListener('click', () => { body.classList.remove('sidebar-open'); }));
    });
  </script>
</body>
</html>